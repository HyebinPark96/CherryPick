<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<!-- namespace의 값은, MemberMapper.xml의 쿼리를 호출할 Mapper Class의 경로와 클래스명으로 하도록 
	해야한다. -->
<mapper namespace="com.pj.cherrypick.mapper.ReviewMapper">

<!-- 	<select id="findReviewListByUsername"
		resultMap="com.pj.cherrypick.domain.ReviewVO, com.pj.cherrypick.domain.CafeVO">
		SELECT *
		FROM review r, cafe c, member m
		LEFT JOIN c
		ON r.cno =
		c.cno
		LEFT JOIN m
		ON r.username = m.username
		WHERE m.username =
		'abcd1234'
	</select> -->
	
<!-- 	<resultMap type="Car" id="Car">	
		<result column="owner_id" property="ownerId"/>	
		<result column="model_no" property="modelNo"/>	
		<result column="color" property="color"/>
	</resultMap>
	
	<resultMap type="Person" id="Person">	
		<result column="id" property="id"/>	
		<result column="name" property="name"/>	
		<result column="age" property="age"/>	
		<collection property="car" resultMap="Car"/>
	</resultMap>
	
	<select id="selectPersonById" parameterType="String" resultMap="Person">	
		SELECT p.id, p.name, p.age		   c.owner_id, c.model_no, c.color      
		FROM person p	  JOIN car c	    ON p.id = c.owner_id	 
		WHERE p.id = #{id}
	</select> -->
	
	
	<resultMap type="com.pj.cherrypick.domain.CafeVO" id="CafeVO">
		<result column="cno" property="cno" />
		<result column="bid" property="bid" />
		<result column="cname" property="cname" />
		<result column="c_lat" property="c_lat" />
		<result column="c_long" property="c_long" />
		<result column="cimage" property="cimage" />
		<result column="caddress" property="caddress" />
		<result column="cphone" property="cphone" />
		<result column="copen" property="copen" />
		<result column="cclose" property="cclose" />
		<result column="parking" property="parking" />
		<result column="pet" property="pet" />
		<result column="kids" property="kids" />
		<result column="seats" property="seats" />
		<result column="cmenu_img" property="cmenu_img" />
	</resultMap>
	
	<resultMap type="com.pj.cherrypick.domain.MemberVO" id="MemberVO">
		<result column="username" property="username" />
		<result column="password" property="password" />
		<result column="name" property="name" />
		<result column="phone" property="phone" />
		<result column="email" property="email" />
		<result column="role" property="role" />
	</resultMap>
	
	<resultMap type="com.pj.cherrypick.domain.ReviewVO" id="ReviewVO">
		<result column="rno" property="rno" />
		<result column="username" property="username" />
		<result column="cno" property="cno" />
		<result column="date" property="date" />
		<result column="title" property="title" />
		<result column="content" property="content" />
		<result column="score" property="score" />
		<result column="waiting" property="waiting" />	
		<collection property="CafeVO" resultMap="CafeVO" />
		<collection property="MemberVO" resultMap="MemberVO" />
	</resultMap>
	

	
	<select id="getMyReviewList" resultMap="ReviewVO">
		SELECT c.caddress
		FROM review r
		LEFT JOIN cafe c
		ON r.cno = c.cno
		LEFT JOIN member m
		ON r.username = m.username
		WHERE m.username = #{username}
	</select>



</mapper>